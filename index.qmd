---
title: "Runapp talk"
author: "James Goldie"
format:
  revealjs: 
    theme: [default, style.scss]
---

## Outline

- What is Quarto?
  - How it builds on RMarkdown
    - RMarkdown/Knitr ecosystem, extensions, other languages
    - Extensibility! ðŸŽ‰
    - But also: fragmentation,which  and heavy reliance on R
  - Quarto packs all these tools in
    - Only needs R if you're doing computation with R
    - ...

## Slide 1: blah
```{r}
mydata <- data.frame(
  x = 1:10,
  y = (1:10)^2)

ojs_define(mydata)
```

```{ojs}
Reveal.on("stackslide", () => { console.log("Reached stackslide!"); } );
Reveal.on("fragmentshown", e => { 
  console.log("Reached fragment #" + e.fragment.attributes["data-fragment-index"].value);
  console.log(e);} );
```

A very quiet slide

## Slide 2: iframe background {auto-animate=true data-preload=true background-iframe="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d50379.12545547731!2d145.06408939156861!3d-37.89080691987292!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sau!4v1649385361305!5m2!1sen!2sau"}

And something else!

## Demo: about us

Take the survey at <https://forms.gle/GtszJpXZYjppsQAz8>

## Results

<!-- https://docs.google.com/spreadsheets/d/e/2PACX-1vSVQzZlkSWWR38FRKyFbO2WGYo04ehrJt4TvWkRVOJ7WPRmfQzPAf7AjtyV2EjIY-2DwKW-SfzLoEQw/pub?gid=220798206&single=true&output=csv -->

```{ojs}
//| code-fold: true

import { liveGoogleSheet } from "@jimjamslam/live-google-sheet";
import { aq, op } from "@uwdata/arquero";

surveyResults = liveGoogleSheet(
  "2PACX-1vSVQzZlkSWWR38FRKyFbO2WGYo04ehrJt4TvWkRVOJ7WPRmfQzPAf7AjtyV2EjIY-2DwKW-SfzLoEQw",
  30000, 1, 2);

respondentCount = surveyResults.length;
```

```{ojs}
md`We have ${respondentCount} respondents so far!`
```

## Tidying

```{ojs}

// get the counts of people using and interested in tools
countsUsed = aq.from(surveyResults)
  .derive({
    used: d => d.response_used.split(", ")
  })
  .select("used")
  .view()
  .unroll("used")
  .rollup()
  .view()

countsWant = aq.from(surveyResults)
  .derive({
    want: d.response_want.split(", ")
  })
  .select("want")
  .view()
  .unroll("want")
  .rollup()
  .view()
```

## Results 2

Let's visualise!
